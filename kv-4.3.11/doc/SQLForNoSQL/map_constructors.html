<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Map Constructors</title>
    <link rel="stylesheet" href="gettingStarted.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="start" href="index.html" title="Getting Started with SQL for Oracle NoSQL Database" />
    <link rel="up" href="constructors.html" title="Chapter 3. Constructors" />
    <link rel="prev" href="constructors.html" title="Chapter 3. Constructors" />
    <link rel="next" href="operators.html" title="Chapter 4. Operators" />
  </head>
  <body>
    <div xmlns="" class="navheader">
      <div class="libver">
        <p>Library Version 12.1.4.3</p>
      </div>
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">Map Constructors</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="constructors.html">Prev</a> </td>
          <th width="60%" align="center">Chapter 3. Constructors</th>
          <td width="20%" align="right"> <a accesskey="n" href="operators.html">Next</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title" style="clear: both"><a id="map_constructors"></a>Map Constructors</h2>
          </div>
        </div>
      </div>
      <pre class="programlisting">{ &lt;expression&gt;:&lt;expression&gt;, 
&lt;expression:&lt;expression&gt;, ... } </pre>
      <p>
            A map constructor constructs a new map out of the
            items returned by the expressions inside the curly brackets.
            These expressions come in pairs: each pair computes one field.
        </p>
      <p>
            The first expression in a pair must return at most one string,
            which serves as the field's name. If the field name expression
            returns the empty sequence, no field is constructed.
        </p>
      <p>
            The second expression returns the field value.  If this
            expression returns more than one item, an array is implicitly
            constructed to store the items, and that array becomes the
            field value. If the field value expression returns the 
            empty sequence, no field is constructed.
        </p>
      <p>
            If the computed name or value for a field is NULL the field is
            skipped (maps cannot contain NULLs).
        </p>
      <p>
            The type of the constructed map is determined during query
            compilation, based on the types of the input expressions and
            the usage of the constructor expression. Specifically, if a
            constructed map can be inserted in another constructed map and
            this “parent” map has type MAP(JSON), then the “child” map will
            also have type MAP(JSON).  This is because "typed" data is not
            allowed inside JSON data.
        </p>
      <p>
            For example, construct a map consisting of user's last name and
            their phone numbers:
        </p>
      <pre class="programlisting">select {
    “last_name” : u.lastName,
    “phones” : u.address.phones
}
from Users u; </pre>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="constructors.html">Prev</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="constructors.html">Up</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="operators.html">Next</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">Chapter 3. Constructors </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Home</a>
          </td>
          <td width="40%" align="right" valign="top"> Chapter 4. Operators</td>
        </tr>
      </table>
    </div>
  </body>
</html>
